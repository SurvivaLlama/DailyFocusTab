<!DOCTYPE html>
<html>
<head>
    <title>Focus Power! (｀_´) </title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="icon" type="image/png" href="icons/icon-48.png">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="fireworks" class="pyro" style="display: none;">
        <div class="before"></div>
        <div class="after"></div>
    </div>
    <label class="switch">
        <input type="checkbox" id="darkModeToggle">
        <span class="slider round"></span>
    </label>
    <div id="focusContainer">
        <div id="focusArea">
            <div id="activeFocusArea" style="display: none;">
                <p id="focusText"></p>
                <button id="focusCheckbox" class="complete-button">Complete</button>
            </div>
            <div id="setFocusArea">
                <p class="anime-text">What should you focus on, senpai? (｀_´) </p>
                <input type="text" id="newFocusInput" placeholder="Enter your focus">
                <button id="setFocusButton">Set Focus</button>
            </div>
        </div>
    </div>
    <a href="https://github.com/SurvivaLlama/" class="github-text" target="_blank">github</a>
    <script src="newtab.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const body = document.body;
            const focusContainer = document.getElementById('focusContainer');
            const setFocusArea = document.getElementById('setFocusArea');
            const activeFocusArea = document.getElementById('activeFocusArea');
            const focusText = document.getElementById('focusText');
            const setFocusButton = document.getElementById('setFocusButton');
            const newFocusInput = document.getElementById('newFocusInput');
            const focusCheckbox = document.getElementById('focusCheckbox');
            const fireworks = document.getElementById('fireworks');


            // Dark Mode Toggle
            darkModeToggle.addEventListener('change', () => {
                body.classList.toggle('dark-mode');
                focusContainer.classList.toggle('dark-mode-container'); // Apply dark mode to container
            });

            // Focus Setting Logic
            setFocusButton.addEventListener('click', () => {
                const newFocus = newFocusInput.value.trim();
                if (newFocus !== "") {
                    localStorage.setItem('focus', newFocus);
                    focusText.textContent = newFocus;
                    setFocusArea.style.display = 'none';
                    activeFocusArea.style.display = 'block';
                    newFocusInput.value = ''; // Clear input field
                }
            });

            // Focus Completion
            focusCheckbox.addEventListener('click', () => {
                localStorage.removeItem('focus');
                activeFocusArea.style.display = 'none';
                setFocusArea.style.display = 'block';
                showFireworks();
            });

            // Load Focus from Local Storage
            const savedFocus = localStorage.getItem('focus');
            if (savedFocus) {
                focusText.textContent = savedFocus;
                setFocusArea.style.display = 'none';
                activeFocusArea.style.display = 'block';
            }


            function showFireworks() {
                fireworks.style.display = 'block';
                // Basic fireworks effect (you'll likely want to improve this)
                setTimeout(() => {
                    fireworks.style.display = 'none';
                }, 3000); // Hide after 3 seconds
            }

        });
    </script>
</body>
</html>
